---

title: Data Coco

keywords: fastai
sidebar: home_sidebar


---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/02_data.coco.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
    {% raw %}
        
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">coco</span> <span class="o">=</span> <span class="n">COCO</span><span class="p">(</span><span class="n">_tiny_anno_path</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>loading annotations into memory...
Done (t=0.00s)
creating index...
index created!
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="LM-Datasets">LM Datasets<a class="anchor-link" href="#LM-Datasets">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">captions</span> <span class="o">=</span> <span class="n">_get_captions</span><span class="p">(</span><span class="n">coco</span><span class="p">)</span>
<span class="n">captions</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[&#39;A small closed toilet in a cramped space.&#39;,
 &#39;A tan toilet and sink combination in a small room.&#39;,
 &#39;This is an advanced toilet with a sink and control panel.&#39;]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">lm_dsets</span> <span class="o">=</span> <span class="n">_get_lm_dsets</span><span class="p">(</span><span class="n">captions</span><span class="p">)</span>
<span class="n">lm_dsets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">

</div>

</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(TensorText([  2,   9,  30, 179,  19,  13,   9,   0, 230,  10]),)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_tiny_lm_dsets" class="doc_header"><code>get_tiny_lm_dsets</code><a href="https://github.com/cwza/text_to_img/tree/master/text_to_img/data/coco.py#L34" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_tiny_lm_dsets</code>(<strong><code>pct</code></strong>=<em><code>1</code></em>, <strong><code>valid_pct</code></strong>=<em><code>0.2</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_small_lm_dsets" class="doc_header"><code>get_small_lm_dsets</code><a href="https://github.com/cwza/text_to_img/tree/master/text_to_img/data/coco.py#L40" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_small_lm_dsets</code>(<strong><code>pct</code></strong>=<em><code>1</code></em>, <strong><code>valid_pct</code></strong>=<em><code>0.2</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">lm_dsets</span> <span class="o">=</span> <span class="n">get_tiny_lm_dsets</span><span class="p">()</span>
<span class="n">lm_dls</span> <span class="o">=</span> <span class="n">lm_dsets</span><span class="o">.</span><span class="n">dataloaders</span><span class="p">(</span><span class="n">bs</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span> <span class="n">seq_len</span><span class="o">=</span><span class="mi">72</span><span class="p">)</span>
<span class="n">lm_dls</span><span class="o">.</span><span class="n">show_batch</span><span class="p">(</span><span class="n">max_n</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>loading annotations into memory...
Done (t=0.01s)
creating index...
index created!
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea ">

</div>

</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>text</th>
      <th>text_</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>xxbos a kitchen that has a bowl of xxunk on the table . xxbos a bathroom is shown with a shower and a toilet . xxbos a cat xxunk in a xxunk xxunk of a car . xxbos xxmaj wooden spoons xxunk out xxunk a kitchen table . xxbos a young woman standing in a kitchen xxunk a plate of vegetables . xxbos a woman eating xxunk vegetables from a bowl .</td>
      <td>a kitchen that has a bowl of xxunk on the table . xxbos a bathroom is shown with a shower and a toilet . xxbos a cat xxunk in a xxunk xxunk of a car . xxbos xxmaj wooden spoons xxunk out xxunk a kitchen table . xxbos a young woman standing in a kitchen xxunk a plate of vegetables . xxbos a woman eating xxunk vegetables from a bowl . xxbos</td>
    </tr>
    <tr>
      <th>1</th>
      <td>xxunk xxunk . xxbos a boy holding an umbrella while standing next to xxunk . xxbos a table xxunk by xxunk and filled with cooking utensils . xxbos a white toilet next to a walk in shower and a sink . xxbos a white bathroom with white fixtures and tile floor xxbos xxmaj girl in a xxunk top holding a xxunk in her back xxunk xxbos xxmaj woman eating an xxunk of</td>
      <td>xxunk . xxbos a boy holding an umbrella while standing next to xxunk . xxbos a table xxunk by xxunk and filled with cooking utensils . xxbos a white toilet next to a walk in shower and a sink . xxbos a white bathroom with white fixtures and tile floor xxbos xxmaj girl in a xxunk top holding a xxunk in her back xxunk xxbos xxmaj woman eating an xxunk of xxunk</td>
    </tr>
  </tbody>
</table>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># skip</span>
<span class="n">lm_dsets</span> <span class="o">=</span> <span class="n">get_small_lm_dsets</span><span class="p">()</span>
<span class="n">lm_dls</span> <span class="o">=</span> <span class="n">lm_dsets</span><span class="o">.</span><span class="n">dataloaders</span><span class="p">(</span><span class="n">bs</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span> <span class="n">seq_len</span><span class="o">=</span><span class="mi">72</span><span class="p">)</span>
<span class="n">lm_dls</span><span class="o">.</span><span class="n">show_batch</span><span class="p">(</span><span class="n">max_n</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>loading annotations into memory...
Done (t=0.31s)
creating index...
index created!
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea ">

</div>

</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>text</th>
      <th>text_</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>xxbos a bench is in an xxunk of manicured bushes . xxbos xxmaj the bathroom sink counter has drawers beneath it and a mirror above . xxbos a parked gray and black motorcycle and a backpack xxbos an old photo of a castle at the end of the street xxbos a person that is cooking some food in a kitchen . xxbos a young girl taking a swing at a tennis ball</td>
      <td>a bench is in an xxunk of manicured bushes . xxbos xxmaj the bathroom sink counter has drawers beneath it and a mirror above . xxbos a parked gray and black motorcycle and a backpack xxbos an old photo of a castle at the end of the street xxbos a person that is cooking some food in a kitchen . xxbos a young girl taking a swing at a tennis ball xxbos</td>
    </tr>
    <tr>
      <th>1</th>
      <td>xxup are xxup standing xxup beside a xxup car xxbos a desk with a monitor , laptop , mouse and books on it . xxbos a man that is leaning against a cart . xxbos xxmaj three xxmaj giraffes are standing in a row and they are all different sizes . xxbos xxmaj there are several cows behind a fence , they are looking at the camera . xxbos a man wearing</td>
      <td>are xxup standing xxup beside a xxup car xxbos a desk with a monitor , laptop , mouse and books on it . xxbos a man that is leaning against a cart . xxbos xxmaj three xxmaj giraffes are standing in a row and they are all different sizes . xxbos xxmaj there are several cows behind a fence , they are looking at the camera . xxbos a man wearing a</td>
    </tr>
  </tbody>
</table>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}
</div>
 

